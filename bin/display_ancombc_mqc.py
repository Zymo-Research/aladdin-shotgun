#!/usr/bin/env python

import numpy as np
import pandas as pd
import argparse
import json

def mqc_qiimeancombc(html):
    description = "The following file provides the ANCOMBC analysis by QIIME"

    html_num = range(1,len(html)+1)
    
    pattern1 = "<div id=\"vis\"></div>"
    pattern2 = "const el = document.getElementById('vis');" 
    pattern3 = "vegaEmbed(\"#vis\", spec, embedOpt)"
    for page,num in zip(html,html_num):
        with open(page, 'r') as file:
            for line in file:
                if re.search(pattern1, line):
                    re.sub("vis", "vis"+str(num), line)
                elif re.search(pattern2, line):
                    re.sub("vis", "vis"+str(num), line)
                elif re.search(pattern3, line):
                    re.sub("vis", "vis"+str(num), line)

if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="""ANCOM-BC diversity table generated by qiime""")
    parser.add_argument("-f", "--html_filename", dest="html", type=str, nargs="+",help="ancom-bc diversity table")
    args = parser.parse_args()
    mqc_qiimeancombc(args.html)
